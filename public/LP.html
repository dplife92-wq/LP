<!doctype html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>Comment générer 5000€/mois en tant que professeur particulier - Formation 2025</title>
    <meta name="description" content="Découvrez comment générer 5000€/mois en tant que professeur particulier de façon simple, régulière et prévisible en 2025. Formation gratuite de 30 minutes.">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Comment générer 5000€/mois en tant que professeur particulier en 2025">
    <meta property="og:description" content="Formation gratuite de 30 minutes pour les professeurs particuliers">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://academy.quentinmdb.com/etude-de-cas">
    
    <!-- Klaviyo Integration - UNIQUEMENT pour le tracking côté client -->
    <script async type="text/javascript" src="https://static.klaviyo.com/onsite/js/klaviyo.js?company_id=Xg9gNa"></script>
    
    <style>
        /* Reset & Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #fff;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            word-wrap: break-word;
            min-width: 320px;
        }
        
        /* Container */
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 12px;
        }
        
        @media (min-width: 480px) {
            .container {
                padding: 0 16px;
            }
        }
        
        @media (min-width: 768px) {
            .container {
                padding: 0 32px;
            }
        }
        
        @media (min-width: 1024px) {
            .container {
                padding: 0 40px;
            }
        }
        
        /* Typography */
        h1 {
            font-size: 20px;
            font-weight: 700;
            line-height: 1.25;
            color: #111;
            margin-bottom: 12px;
            word-wrap: break-word;
            hyphens: auto;
        }
        
        @media (min-width: 375px) {
            h1 {
                font-size: 24px;
                margin-bottom: 16px;
            }
        }
        
        @media (min-width: 768px) {
            h1 {
                font-size: 32px;
                margin-bottom: 20px;
            }
        }
        
        @media (min-width: 1024px) {
            h1 {
                font-size: 40px;
            }
        }
        
        h2 {
            font-size: 20px;
            font-weight: 600;
            line-height: 1.3;
            color: #111;
            margin-bottom: 16px;
        }
        
        @media (min-width: 768px) {
            h2 {
                font-size: 28px;
            }
        }
        
        @media (min-width: 1024px) {
            h2 {
                font-size: 32px;
            }
        }
        
        h3 {
            font-size: 16px;
            font-weight: 600;
            color: #222;
            margin-bottom: 8px;
        }
        
        @media (min-width: 768px) {
            h3 {
                font-size: 18px;
                margin-bottom: 12px;
            }
        }
        
        p {
            font-size: 14px;
            line-height: 1.5;
            color: #555;
            margin-bottom: 12px;
        }
        
        @media (min-width: 768px) {
            p {
                font-size: 16px;
                line-height: 1.6;
                margin-bottom: 16px;
            }
        }
        
        .lead {
            font-size: 14px;
            font-weight: 500;
            color: #444;
            margin-bottom: 16px;
            line-height: 1.4;
        }
        
        @media (min-width: 375px) {
            .lead {
                font-size: 15px;
                margin-bottom: 18px;
            }
        }
        
        @media (min-width: 768px) {
            .lead {
                font-size: 18px;
                margin-bottom: 24px;
                line-height: 1.5;
            }
        }
        
        /* Loading state for forms */
        .form-loading {
            opacity: 0.7;
            pointer-events: none;
        }
        
        .form-success {
            color: #28a745;
            font-weight: 600;
            text-align: center;
            padding: 16px;
            background: #d4edda;
            border-radius: 8px;
            margin-bottom: 16px;
        }
        
        .form-error {
            color: #dc3545;
            font-weight: 600;
            text-align: center;
            padding: 16px;
            background: #f8d7da;
            border-radius: 8px;
            margin-bottom: 16px;
        }
        
        /* Buttons */
        .btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 12px 20px;
            background: #0d6efd;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 13px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            width: 100%;
            text-align: center;
            min-height: 44px;
            touch-action: manipulation;
            line-height: 1.2;
        }
        
        @media (min-width: 375px) {
            .btn {
                font-size: 14px;
                padding: 14px 24px;
                gap: 8px;
                min-height: 48px;
            }
        }
        
        @media (min-width: 768px) {
            .btn {
                font-size: 16px;
                padding: 16px 32px;
            }
        }
        
        @media (min-width: 900px) {
            .btn {
                width: auto;
                display: inline-flex;
                min-height: auto;
            }
        }
        
        .btn:hover, .btn:focus {
            background: #0b5ed7;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(13, 110, 253, 0.3);
            outline: none;
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-purple {
            background: #6A5ACD;
            color: white;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .btn-purple:hover, .btn-purple:focus {
            background: #483D8B;
            box-shadow: 0 4px 12px rgba(106, 90, 205, 0.3);
        }
        
        .btn-pink {
            background: #6A5ACD;
            color: white;
            font-weight: 600;
            text-transform: none;
            letter-spacing: 0;
        }
        
        .btn-pink:hover, .btn-pink:focus {
            background: #483D8B;
            box-shadow: 0 4px 12px rgba(106, 90, 205, 0.3);
        }
        
        .play-icon {
            font-size: 12px;
        }
        
        @media (min-width: 768px) {
            .play-icon {
                font-size: 14px;
            }
        }
        
        /* Hero Title Section */
        .hero-title {
            padding: 40px 0 20px;
            background: white;
            text-align: center;
        }
        
        @media (min-width: 768px) {
            .hero-title {
                padding: 60px 0 30px;
            }
        }
        
        .title-divider {
            width: 60px;
            height: 3px;
            background: #6A5ACD;
            margin: 20px auto;
        }
        
        /* Content Section */
        .content-section {
            padding: 40px 0 60px;
            background: #f8f9fa;
        }
        
        @media (min-width: 768px) {
            .content-section {
                padding: 60px 0 80px;
            }
        }
        
        .content-grid {
            display: flex;
            flex-direction: column;
            gap: 32px;
        }
        
        @media (min-width: 900px) {
            .content-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 60px;
                align-items: center;
            }
        }
        
        /* Video Section */
        .video-container {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .video-player {
            width: 100%;
            max-width: 500px;
            aspect-ratio: 16/9;
            background: #000;
            border-radius: 12px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 500;
            font-size: 12px;
            overflow: hidden;
        }
        
        .video-player img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 12px;
        }
        
        @media (min-width: 768px) {
            .video-player {
                font-size: 14px;
            }
        }
        
        .play-btn {
            position: absolute;
            width: 60px;
            height: 60px;
            background: rgba(106, 90, 205, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            touch-action: manipulation;
            backdrop-filter: blur(4px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        @media (min-width: 768px) {
            .play-btn {
                width: 80px;
                height: 80px;
            }
        }
        
        .play-btn:hover, .play-btn:focus {
            background: rgba(72, 61, 139, 0.95);
            transform: scale(1.1);
            outline: none;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }
        
        .play-btn:active {
            transform: scale(1.05);
        }
        
        .play-btn::after {
            content: "▶";
            color: white;
            font-size: 20px;
            margin-left: 3px;
        }
        
        @media (min-width: 768px) {
            .play-btn::after {
                font-size: 24px;
                margin-left: 4px;
            }
        }
        
        /* Benefits Section */
        .benefits {
            text-align: left;
        }
        
        @media (max-width: 899px) {
            .benefits {
                text-align: center;
            }
        }
        
        .benefits-intro {
            margin-bottom: 24px;
            color: #666;
            font-weight: 500;
        }
        
        .benefits-list {
            list-style: none;
            margin-bottom: 32px;
        }
        
        .benefits-list li {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 16px;
            color: #666;
            font-size: 14px;
            line-height: 1.5;
        }
        
        @media (min-width: 768px) {
            .benefits-list li {
                font-size: 16px;
                margin-bottom: 20px;
            }
        }
        
        @media (max-width: 899px) {
            .benefits-list li {
                justify-content: flex-start;
                text-align: left;
                max-width: 400px;
                margin-left: auto;
                margin-right: auto;
            }
        }
        
        .benefits-list li::before {
            content: "•";
            color: #6A5ACD;
            font-weight: bold;
            font-size: 16px;
            flex-shrink: 0;
            margin-top: 2px;
        }
        
        /* Testimonials Section */
        .testimonials {
            padding: 60px 0;
            background: white;
        }
        
        @media (min-width: 768px) {
            .testimonials {
                padding: 100px 0;
            }
        }
        
        .testimonials h2 {
            text-align: center;
            margin-bottom: 48px;
        }
        
        /* Video Testimonials */
        .testimonials-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-top: 32px;
        }
        
        @media (min-width: 600px) {
            .testimonials-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 24px;
            }
        }
        
        @media (min-width: 900px) {
            .testimonials-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 32px;
                margin-top: 48px;
            }
        }
        
        .testimonial-card {
            text-align: center;
        }
        
        .testimonial-info h3 {
            font-size: 16px;
            margin-bottom: 4px;
        }
        
        @media (min-width: 768px) {
            .testimonial-info h3 {
                font-size: 18px;
                margin-bottom: 8px;
            }
        }
        
        .testimonial-info p {
            font-size: 12px;
            color: #666;
            margin: 0;
        }
        
        @media (min-width: 768px) {
            .testimonial-info p {
                font-size: 14px;
            }
        }
        
        /* CTA Section */
        .cta-section {
            padding: 40px 0;
            text-align: center;
        }
        
        @media (min-width: 768px) {
            .cta-section {
                padding: 60px 0;
            }
        }
        
        /* Footer */
        .footer {
            background: #f8f9fa;
            color: #333;
            padding: 32px 0;
            text-align: center;
        }
        
        @media (min-width: 768px) {
            .footer {
                padding: 40px 0;
            }
        }
        
        .footer p {
            color: #333;
            margin-bottom: 12px;
            font-size: 12px;
        }
        
        @media (min-width: 768px) {
            .footer p {
                margin-bottom: 16px;
                font-size: 14px;
            }
        }
        
        .footer-links {
            margin: 20px 0;
        }
        
        @media (min-width: 768px) {
            .footer-links {
                margin: 24px 0;
            }
        }
        
        .footer-links a {
            color: #333;
            text-decoration: none;
            margin: 0 12px;
            font-size: 12px;
        }
        
        @media (min-width: 768px) {
            .footer-links a {
                margin: 0 16px;
                font-size: 14px;
            }
        }
        
        .footer-links a:hover, .footer-links a:focus {
            color: #6A5ACD;
            outline: none;
        }
        
        .disclaimer {
            max-width: 800px;
            margin: 0 auto;
            font-size: 10px;
            line-height: 1.4;
            color: #666;
            margin-top: 24px;
            padding: 0 8px;
        }
        
        @media (min-width: 768px) {
            .disclaimer {
                font-size: 12px;
                margin-top: 32px;
                padding: 0;
            }
        }
        
        /* MODAL AMÉLIORÉE - Fond flouté et centrage parfait */
        .modal {
            display: none; /* Cachée par défaut */
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            animation: modalFadeIn 0.3s ease;
            padding: 16px;
        }
        
        .modal.show {
            display: flex !important; /* Flexbox UNIQUEMENT quand .show */
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 16px;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            transform: scale(0.9);
            animation: modalSlideIn 0.3s ease forwards;
            position: relative;
        }
        
        .modal-header {
            padding: 24px 24px 0;
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            right: 16px;
            top: 16px;
            background: rgba(0, 0, 0, 0.1);
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            touch-action: manipulation;
            transition: all 0.2s ease;
        }
        
        .modal-close:hover, .modal-close:focus {
            background: rgba(0, 0, 0, 0.2);
            color: #333;
            outline: none;
            transform: scale(1.1);
        }
        
        .progress-bar {
            background: #e9ecef;
            height: 8px;
            border-radius: 4px;
            margin: 16px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(
                45deg,
                #6A5ACD 25%,
                #8B7BD8 25%,
                #8B7BD8 50%,
                #6A5ACD 50%,
                #6A5ACD 75%,
                #8B7BD8 75%,
                #8B7BD8
            );
            background-size: 20px 20px;
            height: 100%;
            width: 50%;
            transition: width 0.3s ease;
            animation: progressStripes 1s linear infinite;
        }
        
        @keyframes progressStripes {
            0% { background-position: 0 0; }
            100% { background-position: 20px 0; }
        }
        
        .modal-body {
            padding: 0 24px 24px;
            text-align: center;
        }
        
        .modal h3 {
            margin-bottom: 16px;
            font-size: 20px;
            color: #333;
            line-height: 1.3;
        }
        
        .modal p {
            margin-bottom: 24px;
            font-size: 16px;
            color: #666;
        }
        
        .modal-form {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 20px;
        }
        
        .form-group {
            position: relative;
        }
        
        .form-input {
            width: 100%;
            padding: 18px 20px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 16px;
            background: white;
            color: #333;
            transition: all 0.3s ease;
            outline: none;
        }
        
        .form-input:focus {
            border-color: #6A5ACD;
            box-shadow: 0 0 0 4px rgba(106, 90, 205, 0.1);
            transform: translateY(-2px);
        }
        
        .form-input::placeholder {
            color: #999;
            font-weight: 400;
        }
        
        .modal-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        /* Sticky CTA for Mobile */
        .sticky-cta {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 16px;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.15);
            z-index: 1000;
            display: block;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        
        @media (min-width: 768px) {
            .sticky-cta {
                display: none;
            }
        }
        
        .sticky-cta .btn {
            margin: 0;
        }
        
        /* Animations */
        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes modalSlideIn {
            from { 
                transform: scale(0.9) translateY(20px);
                opacity: 0;
            }
            to { 
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }
        
        /* Extra small screen breakpoint */
        @media (max-width: 360px) {
            .container {
                padding: 0 8px;
            }
            
            h1 {
                font-size: 18px;
                line-height: 1.3;
            }
            
            .modal {
                padding: 8px;
            }
            
            .modal-content {
                border-radius: 12px;
            }
            
            .modal-header {
                padding: 16px 16px 0;
            }
            
            .modal-body {
                padding: 0 16px 16px;
            }
        }
        
        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            .modal,
            .modal-content,
            .form-input,
            .btn {
                animation: none;
                transition: none;
            }
        }
        
        /* High contrast mode */
        @media (prefers-contrast: high) {
            .modal {
                background-color: rgba(0, 0, 0, 0.8);
            }
            
            .modal-content {
                border: 2px solid #000;
            }
        }
        
        /* Blur effect for main content when modal is open */
        body.modal-open {
            overflow: hidden;
        }
        
        body.modal-open main,
        body.modal-open .sticky-cta,
        body.modal-open .footer {
            filter: blur(4px);
            transition: filter 0.3s ease;
        }
    </style>
</head>
<body>
    <main id="main-content">
        <!-- Hero Title Section -->
        <section class="hero-title">
            <div class="container">
                <h1>Comment générer 5000€/mois en tant que professeur particulier de façon <span style="color: #6A5ACD;">simple</span>, <span style="color: #6A5ACD;">régulière</span> et <span style="color: #6A5ACD;">prévisible</span> en <span style="color: #6A5ACD;">2025</span> ?</h1>
                <div class="title-divider"></div>
                <p class="lead"><span style="color: #6A5ACD;">Sans</span> ne plus jamais dépendre des <span style="color: #6A5ACD;">plateformes</span> et sans poster sur les <span style="color: #6A5ACD;">réseaux sociaux</span></p>
            </div>
        </section>

        <!-- Content Section -->
        <section class="content-section">
            <div class="container">
                <div class="content-grid">
                    <!-- Video Section -->
                    <div class="video-container">
                        <figure class="video-player" role="img" aria-label="Formation vidéo">
                            <img src="https://res.cloudinary.com/dwxakodta/image/upload/v1755706197/ezgif.com-animated-gif-maker_egcy9p.gif" 
                                 alt="Vidéo de formation - Tableau explicatif" 
                                 style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px;">
                            <button class="play-btn" aria-label="Lire la vidéo de formation"></button>
                        </figure>
                    </div>
                    
                    <!-- Benefits Section -->
                    <div class="benefits">
                        <p class="benefits-intro"><strong>30 minutes de <span style="color: #666;">formation gratuite</span> pour apprendre à :</strong></p>
                        
                        <ul class="benefits-list">
                            <li>Découvrir ce nouveau système méconnu des professeurs particuliers pour :</li>
                            <li>Obtenir 3, 5, 10 élèves réguliers chaque mois de façon automatique</li>
                            <li>Gagner 5000€ (ou plus) par mois, de façon récurrente et prévisible</li>
                        </ul>
                        
                        <button class="btn btn-purple cta-btn" data-action="show-modal">
                            <span class="play-icon">▶</span>
                            APPRENDRE
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section class="testimonials">
            <div class="container">
                <h2>Ce qu'ils ont pensé de cette formation</h2>
                
                <div class="testimonials-grid">
                    <div class="testimonial-card">
                        <img src="https://res.cloudinary.com/dwxakodta/image/upload/v1755714566/Design_sans_titre_copie_2_znqjx2.png" alt="Témoignage de Georges" style="width: 100%; border-radius: 8px;">
                        <div class="testimonial-info">
                            <h3>Georges</h3>
                            <p>Professeur d'espagnol</p>
                        </div>
                    </div>
                    
                    <div class="testimonial-card">
                        <img src="https://res.cloudinary.com/dwxakodta/image/upload/v1755714566/Design_sans_titre_keykjc.png" alt="Témoignage d'Anne-Sophie" style="width: 100%; border-radius: 8px;">
                        <div class="testimonial-info">
                            <h3>Anne-Sophie</h3>
                            <p>Professeur de mathématiques</p>
                        </div>
                    </div>
                    
                    <div class="testimonial-card">
                        <img src="https://res.cloudinary.com/dwxakodta/image/upload/v1755714566/Design_sans_titre_copie_yc15q5.png" alt="Témoignage de Brigitte" style="width: 100%; border-radius: 8px;">
                        <div class="testimonial-info">
                            <h3>Brigitte</h3>
                            <p>Professeur de français</p>
                        </div>
                    </div>
                </div>
                
                <div class="cta-section">
                    <button class="btn btn-purple cta-btn" data-action="show-modal">
                        <span class="play-icon">▶</span>
                        APPRENDRE
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- Sticky CTA for Mobile -->
    <div class="sticky-cta">
        <button class="btn btn-purple cta-btn" data-action="show-modal">
            <span class="play-icon">▶</span>
            APPRENDRE
        </button>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Edouard Merle du Bourg. Tous droits réservés.</p>
            
            <div class="footer-links">
                <a href="#" tabindex="0">Terms</a>
                <a href="#" tabindex="0">Privacy</a>
            </div>
            
            <div class="disclaimer">
                <p>NOT FACEBOOK: Ce site n'est en aucun cas affilié avec Facebook. Une fois que vous quittez Facebook, la responsabilité ne relève plus de Facebook mais du site vers lequel vous vous dirigez. Nous faisons de notre mieux pour indiquer clairement et montrer toutes les preuves du produit et utilisons des résultats réels. Nous ne vendons pas votre email ou autres informations à qui que ce soit. Nous respectons votre vie privée et haïssons le SPAM autant que vous ! Si vous avez des questions, n'hésitez pas à nous contacter en utilisant le formulaire de contact sur ce site.</p>
            </div>
        </div>
    </footer>

    <!-- MODAL AMÉLIORÉE - Toujours fonctionnelle -->
    <div id="formModal" class="modal" role="dialog" aria-labelledby="modalTitle" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <button class="modal-close" aria-label="Fermer la modale" data-action="close-modal">&times;</button>
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
                <p style="font-size: 12px; color: #666; margin: 8px 0 0 0; text-align: center;">50% Complete</p>
            </div>
            <div class="modal-body">
                <h3 id="modalTitle">Entrez vos informations et accédez à la formation 🚀</h3>
                
                <div id="form-messages"></div>
                
                <form class="modal-form" id="leadForm">
                    <div class="form-group">
                        <input type="text" class="form-input" placeholder="Prénom" name="firstName" required autocomplete="given-name">
                    </div>
                    <div class="form-group">
                        <input type="email" class="form-input" placeholder="Email" name="email" required autocomplete="email">
                    </div>
                </form>
                
                <div class="modal-buttons">
                    <button type="submit" form="leadForm" class="btn btn-pink" id="submitBtn">
                        <span class="play-icon">▶</span>
                        Regarder maintenant (gratuitement)
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let modalShown = false;
        
        // Détection mobile
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth <= 768;
        
        // FONCTION D'INSCRIPTION SÉCURISÉE - Utilise l'API Vercel
        async function subscribeToKlaviyo(email, firstName) {
            console.log('🚀 === INSCRIPTION VIA API VERCEL SÉCURISÉE ===');
            console.log('Email:', email);
            console.log('Prénom:', firstName);
            
            try {
                const response = await fetch('/api/subscribe', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        email: email,
                        firstName: firstName
                    })
                });

                console.log('📡 Réponse API Vercel:', response.status, response.statusText);

                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({ error: 'Erreur inconnue' }));
                    throw new Error(errorData.error || `Erreur HTTP: ${response.status}`);
                }

                const result = await response.json();
                console.log('✅ Succès API Vercel:', result);

                return { 
                    success: true, 
                    method: 'vercel_api_secure',
                    profile_id: result.profile_id,
                    timestamp: result.timestamp
                };

            } catch (error) {
                console.error('❌ Erreur API Vercel:', error);

                // Fallback vers tracking côté client UNIQUEMENT
                try {
                    console.log('🔄 Fallback tracking côté client...');
                    
                    if (typeof window._learnq !== 'undefined') {
                        window._learnq.push(['track', 'Form Submission Attempt', {
                            'email': email,
                            'first_name': firstName,
                            'source': 'form_modal_fallback',
                            'api_error': error.message,
                            'timestamp': new Date().toISOString()
                        }]);
                        
                        console.log('✅ Événement tracké en fallback');
                    }

                    return { 
                        success: false, 
                        method: 'fallback_tracking_only',
                        error: error.message 
                    };

                } catch (fallbackError) {
                    console.error('❌ Erreur fallback:', fallbackError);
                    return { 
                        success: false, 
                        error: error.message,
                        fallback_error: fallbackError.message 
                    };
                }
            }
        }
        
        // Fonctions utilitaires pour les messages
        function showMessage(message, type = 'success') {
            const messagesContainer = document.getElementById('form-messages');
            messagesContainer.innerHTML = `<div class="form-${type}">${message}</div>`;
            
            setTimeout(() => {
                messagesContainer.innerHTML = '';
            }, 5000);
        }
        
        function setFormLoading(loading) {
            const form = document.getElementById('leadForm');
            const submitBtn = document.getElementById('submitBtn');
            
            if (loading) {
                form.classList.add('form-loading');
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<span class="play-icon">⏳</span> Envoi en cours...';
            } else {
                form.classList.remove('form-loading');
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<span class="play-icon">▶</span> Regarder maintenant (gratuitement)';
            }
        }
        
        // FONCTIONS MODAL AMÉLIORÉES - Toujours fonctionnelles
        function showModal() {
            console.log('🎯 Affichage de la modal');
            
            const modal = document.getElementById('formModal');
            const body = document.body;
            
            // Afficher la modal
            modal.classList.add('show');
            modal.setAttribute('aria-hidden', 'false');
            
            // Flouter le fond
            body.classList.add('modal-open');
            
            // Focus management
            const firstInput = modal.querySelector('.form-input');
            if (firstInput) {
                setTimeout(() => firstInput.focus(), 100);
            }
            
            // Marquer comme affiché
            modalShown = true;
            
            // Track modal ouvert
            if (window._learnq) {
                window._learnq.push(['track', 'Modal Opened', {
                    'modal_type': 'form_modal',
                    'page': window.location.pathname,
                    'timestamp': new Date().toISOString()
                }]);
            }
            
            console.log('✅ Modal affichée avec succès');
        }
        
        function closeModal() {
            console.log('🔒 Fermeture de la modal');
            
            const modal = document.getElementById('formModal');
            const body = document.body;
            
            // Cacher la modal
            modal.classList.remove('show');
            modal.setAttribute('aria-hidden', 'true');
            
            // Enlever le flou
            body.classList.remove('modal-open');
            
            // Clear messages
            document.getElementById('form-messages').innerHTML = '';
            
            // Reset form
            document.getElementById('leadForm').reset();
            setFormLoading(false);
            
            console.log('✅ Modal fermée');
        }
        
        // Event listeners pour tous les boutons CTA
        function initializeButtons() {
            console.log('🔧 Initialisation des boutons');
            
            // Tous les boutons avec data-action="show-modal"
            const ctaButtons = document.querySelectorAll('[data-action="show-modal"]');
            const closeButtons = document.querySelectorAll('[data-action="close-modal"]');
            const playButton = document.querySelector('.play-btn');
            
            console.log(`Found ${ctaButtons.length} CTA buttons`);
            console.log(`Found ${closeButtons.length} close buttons`);
            
            // Ajouter event listeners aux boutons CTA
            ctaButtons.forEach((button, index) => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log(`🎯 CTA button ${index + 1} clicked`);
                    
                    // Haptic feedback
                    if (navigator.vibrate) {
                        navigator.vibrate([50, 50, 100]);
                    }
                    
                    // Track click
                    if (window._learnq) {
                        window._learnq.push(['track', 'CTA Clicked', {
                            'cta_text': this.textContent.trim(),
                            'cta_position': index,
                            'page': window.location.pathname
                        }]);
                    }
                    
                    // Toujours afficher la modal
                    showModal();
                });
            });
            
            // Ajouter event listeners aux boutons de fermeture
            closeButtons.forEach((button) => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    closeModal();
                });
            });
            
            // Play button
            if (playButton) {
                playButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('🎬 Play button clicked');
                    
                    if (navigator.vibrate) {
                        navigator.vibrate(50);
                    }
                    
                    // Animation
                    this.style.transform = 'scale(1.1)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 200);
                    
                    // Afficher la modal
                    showModal();
                });
            }
        }
        
        // Form submission SÉCURISÉ
        function initializeForm() {
            const form = document.getElementById('leadForm');
            if (form) {
                form.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    console.log('📝 === SOUMISSION FORMULAIRE ===');
                    
                    const formData = new FormData(form);
                    const firstName = formData.get('firstName').trim();
                    const email = formData.get('email').trim();
                    
                    console.log('Données formulaire:', { firstName, email });
                    
                    // Validation côté client
                    if (!firstName || !email) {
                        showMessage('Veuillez remplir tous les champs', 'error');
                        return;
                    }
                    
                    if (!email.includes('@') || !email.includes('.')) {
                        showMessage('Veuillez entrer une adresse email valide', 'error');
                        return;
                    }
                    
                    setFormLoading(true);
                    
                    try {
                        const result = await subscribeToKlaviyo(email, firstName);
                        
                        console.log('📊 Résultat final:', result);
                        
                        if (result.success) {
                            // Succès réel
                            if (navigator.vibrate) {
                                navigator.vibrate([50, 50, 100]);
                            }
                            
                            showMessage(`Merci ${firstName} ! Vous allez recevoir un email avec le lien de la formation.`, 'success');
                            
                            setTimeout(() => {
                                closeModal();
                            }, 3000);
                            
                        } else {
                            // Erreur mais message optimiste pour l'UX
                            showMessage(`Merci ${firstName} ! Votre demande a été enregistrée. Nous vous recontacterons bientôt.`, 'success');
                            setTimeout(() => closeModal(), 2000);
                        }
                        
                    } catch (error) {
                        console.error('💥 Erreur lors de l\'inscription:', error);
                        
                        // Message optimiste même en cas d'erreur (UX)
                        showMessage(`Merci ${firstName} ! Votre demande a été enregistrée.`, 'success');
                        setTimeout(() => closeModal(), 2000);
                        
                    } finally {
                        setFormLoading(false);
                    }
                });
            }
        }
        
        // Event listeners pour fermeture modal
        function initializeModalEvents() {
            const modal = document.getElementById('formModal');
            
            // Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && modal.classList.contains('show')) {
                    closeModal();
                }
            });
            
            // Click outside
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal();
                }
            });
            
            // Focus trap
            modal.addEventListener('keydown', function(e) {
                if (e.key === 'Tab') {
                    const focusableElements = modal.querySelectorAll(
                        'button, input, select, textarea, [tabindex]:not([tabindex="-1"])'
                    );
                    const firstElement = focusableElements[0];
                    const lastElement = focusableElements[focusableElements.length - 1];
                    
                    if (e.shiftKey) {
                        if (document.activeElement === firstElement) {
                            lastElement.focus();
                            e.preventDefault();
                        }
                    } else {
                        if (document.activeElement === lastElement) {
                            firstElement.focus();
                            e.preventDefault();
                        }
                    }
                }
            });
        }
        
        // Sticky CTA logic
        function handleStickyCtaVisibility() {
            if (!isMobile) return;
            
            const stickyCta = document.querySelector('.sticky-cta');
            const heroSection = document.querySelector('.hero-title');
            const footer = document.querySelector('.footer');
            
            if (!stickyCta || !heroSection || !footer) return;
            
            const heroRect = heroSection.getBoundingClientRect();
            const footerRect = footer.getBoundingClientRect();
            const windowHeight = window.innerHeight;
            
            if (heroRect.bottom > 0 || footerRect.top < windowHeight) {
                stickyCta.style.transform = 'translateY(100%)';
                stickyCta.style.opacity = '0';
            } else {
                stickyCta.style.transform = 'translateY(0)';
                stickyCta.style.opacity = '1';
            }
        }
        
        // Scroll handler optimisé
        let ticking = false;
        function updateOnScroll() {
            handleStickyCtaVisibility();
            ticking = false;
        }
        
        window.addEventListener('scroll', function() {
            if (!ticking) {
                requestAnimationFrame(updateOnScroll);
                ticking = true;
            }
        }, { passive: true });
        
        window.addEventListener('resize', function() {
            handleStickyCtaVisibility();
        }, { passive: true });
        
        // Initialisation complète
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🎬 === INITIALISATION COMPLÈTE ===');
            console.log('✅ Aucune clé Klaviyo exposée côté client');
            console.log('✅ Modal avec fond flouté et centrage parfait');
            console.log('✅ Boutons CTA toujours fonctionnels');
            
            // Initialiser tous les composants
            initializeButtons();
            initializeForm();
            initializeModalEvents();
            
            // Sticky CTA
            const stickyCta = document.querySelector('.sticky-cta');
            if (stickyCta) {
                stickyCta.style.transform = 'translateY(100%)';
                stickyCta.style.opacity = '0';
            }
            
            setTimeout(handleStickyCtaVisibility, 100);
            
            // Track page view
            setTimeout(() => {
                if (window._learnq) {
                    console.log('✅ Klaviyo chargé pour tracking côté client');
                    window._learnq.push(['track', 'Page Viewed', {
                        'page': window.location.pathname,
                        'title': document.title,
                        'timestamp': new Date().toISOString()
                    }]);
                } else {
                    console.log('⚠️ Klaviyo non chargé (tracking uniquement)');
                }
            }, 2000);
            
            console.log('🎯 Initialisation terminée - Tous les boutons CTA fonctionnent !');
        });

        // Fonctions de debug
        window.testModal = function() {
            console.log('🧪 Test d\'affichage de la modal');
            showModal();
        };

        window.testSecureAPI = function(testEmail = 'test@example.com', testFirstName = 'Test User') {
            console.log('🧪 === TEST API VERCEL SÉCURISÉE ===');
            return subscribeToKlaviyo(testEmail, testFirstName);
        };

        window.checkButtons = function() {
            const ctaButtons = document.querySelectorAll('[data-action="show-modal"]');
            const playButton = document.querySelector('.play-btn');
            
            console.log('🔍 === VÉRIFICATION BOUTONS ===');
            console.log(`✅ ${ctaButtons.length} boutons CTA trouvés`);
            console.log(`✅ ${playButton ? 1 : 0} bouton play trouvé`);
            
            ctaButtons.forEach((btn, i) => {
                console.log(`Bouton ${i + 1}:`, btn.textContent.trim());
            });
        };

        // Error handling
        window.addEventListener('error', function(e) {
            console.error('💥 Erreur JavaScript:', e.message);
        });

        window.addEventListener('unhandledrejection', function(e) {
            console.error('💥 Promise rejetée:', e.reason);
        });
    </script>
</body>
</html>